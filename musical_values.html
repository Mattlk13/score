<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>Musical Values</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Score</span> <span class="project-version">0.4.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="basics.html"><div class="inner"><span>Basics of Score Writing Using Lists </span></div></a></li><li class="depth-1 "><a href="beats.html"><div class="inner"><span>Beats - functions for beat sequences and sets</span></div></a></li><li class="depth-1 "><a href="csound.html"><div class="inner"><span>Csound Live Coding Example </span></div></a></li><li class="depth-1 "><a href="design.html"><div class="inner"><span>Design</span></div></a></li><li class="depth-1 "><a href="euclid.html"><div class="inner"><span>Euclidean Rhythms</span></div></a></li><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Introduction to Score</span></div></a></li><li class="depth-1 "><a href="lc.html"><div class="inner"><span>lc! - mini-language for notation</span></div></a></li><li class="depth-1 "><a href="mask.html"><div class="inner"><span>Mask</span></div></a></li><li class="depth-1  current"><a href="musical_values.html"><div class="inner"><span>Musical Values</span></div></a></li><li class="depth-1 "><a href="score_gen.html"><div class="inner"><span>Score Generation</span></div></a></li><li class="depth-1 "><a href="score_mapping.html"><div class="inner"><span>Score Mapping </span></div></a></li><li class="depth-1 "><a href="score_organization.html"><div class="inner"><span>Score Organization </span></div></a></li><li class="depth-1 "><a href="sieves.html"><div class="inner"><span>Sieves</span></div></a></li><li class="depth-1 "><a href="transformation.html"><div class="inner"><span>Score Transformation </span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>score</span></div></div></li><li class="depth-2 branch"><a href="score.amp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>amp</span></div></a></li><li class="depth-2 branch"><a href="score.beats.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>beats</span></div></a></li><li class="depth-2 branch"><a href="score.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="score.euclid.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>euclid</span></div></a></li><li class="depth-2 branch"><a href="score.freq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>freq</span></div></a></li><li class="depth-2 branch"><a href="score.lc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lc</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mask</span></div></div></li><li class="depth-3 branch"><a href="score.mask.accumulator.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>accumulator</span></div></a></li><li class="depth-3 branch"><a href="score.mask.bpf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bpf</span></div></a></li><li class="depth-3 branch"><a href="score.mask.generators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>generators</span></div></a></li><li class="depth-3 branch"><a href="score.mask.items.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>items</span></div></a></li><li class="depth-3 branch"><a href="score.mask.mask.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mask</span></div></a></li><li class="depth-3 branch"><a href="score.mask.oscillators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oscillators</span></div></a></li><li class="depth-3 branch"><a href="score.mask.probability.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>probability</span></div></a></li><li class="depth-3"><a href="score.mask.quantizer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>quantizer</span></div></a></li><li class="depth-2 branch"><a href="score.ops.html"><div class="inner"><span class="tree" style="top: -269px;"><span class="top" style="height: 278px;"></span><span class="bottom"></span></span><span>ops</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>orchestra</span></div></div></li><li class="depth-3 branch"><a href="score.orchestra.performer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>performer</span></div></a></li><li class="depth-3"><a href="score.orchestra.performer-group.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>performer-group</span></div></a></li><li class="depth-2 branch"><a href="score.sieves.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>sieves</span></div></a></li><li class="depth-2 branch"><a href="score.tuning.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tuning</span></div></a></li><li class="depth-2"><a href="score.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#musical-values" name="musical-values"></a>Musical Values</h1>
<p>Score provides a number of functions for generating and converting musical values. These functions are useful on their own as well as when generating and processing notes. These value functions are described below.</p>
<h4><a href="#amplitude-and-frequency" name="amplitude-and-frequency"></a>Amplitude and Frequency</h4>
<p>The following lists basic functions provided by Score for conversion between different values for both amplitude and frequency.</p>
<table>
  <thead>
    <tr>
      <th>Function </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>db-&gt;&gt;amp </td>
      <td>converts decibels to power ratios. </td>
    </tr>
    <tr>
      <td>midi-&gt;freq </td>
      <td>converts MIDI note numbers to frequency (Hz). </td>
    </tr>
    <tr>
      <td>keyword-&gt;notenum </td>
      <td>convert pitch keywords to MIDI note numbers. </td>
    </tr>
    <tr>
      <td>keyword-&gt;freq </td>
      <td>convert pitch keyword to frequency (Hz). </td>
    </tr>
    <tr>
      <td>pch-&gt;notenum </td>
      <td>convert PCH format to MIDI note number. </td>
    </tr>
    <tr>
      <td>pch-&gt;freq </td>
      <td>convert PCH format to frequency (Hz). </td>
    </tr>
    <tr>
      <td>hertz </td>
      <td>generic function for converting keyword, MIDI note number, or PCH to frequency (Hz). </td>
    </tr>
  </tbody>
</table>
<p>These functions are useful to allow the user to write values in a form they find convenient and transform them into values appropriate for music systems to process. For example, the keyword format uses Clojure keywords to allow for note pitches to be written using the note names and octave specifications that are common in Western art music notation.</p>
<pre><code class="clojure">    user=&gt; (keyword-&gt;notenum :C4)
    60
    user=&gt; (keyword-&gt;notenum :Cs4)
    61
    user=&gt; (keyword-&gt;notenum :Bb4)
    70
</code></pre>
<p>The above is an example REPL session where keywords are used with the keyword-&gt;notenum function to generate MIDI note numbers. The keyword :C4 describes the note name C at octave 4, which corresponds to the MIDI note number 60 and the middle C key on a piano. Note names can be further modified by using ‘s’ and ‘b’ to denote sharps and flats.</p>
<p>Beyond decibels, amplitude, keywords, MIDI, and frequencies is the PCH format. This format is described further below.</p>
<h4><a href="#pch-notation" name="pch-notation"></a>PCH notation</h4>
<p>Score’s PCH notation is based on Csound <a href="http://csound.github.io/docs/manual/cpspch.html">pch</a> notation. In Csound, pch is a specially formatted number defined using “octave point pitch class”. For example, ‘8.01’ means “octave 8, pitch class 1” and is equivalent to the C# above middle C on a piano. Instead of using numbers, Score uses a 2-vector to represent PCH. The equivalent to Csound’s ‘8.01’ would be Score’s ‘[8 1]’.</p>
<p>Besides the PCH to MIDI and frequency functions, Score provides additional PCH-related functions.</p>
<table>
  <thead>
    <tr>
      <th>Function </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>pch-add </td>
      <td>adds an interval to a PCH and returns the new PCH, optionally taking in scale-degrees per octave (defaults to 12). </td>
    </tr>
    <tr>
      <td>pch-diff </td>
      <td>calculates the interval between two PCHs, optionally taking in scale-degrees per octave (defaults to 12). </td>
    </tr>
    <tr>
      <td>pch-interval-seq </td>
      <td>given an initial PCH, and list of intervals, generates a sequence of PCHs applying pch-add using the the previous PCH and new interval from the list. </td>
    </tr>
    <tr>
      <td>analyze-intervals </td>
      <td>given a list of PCHs, calculate the intervals between each PCH. </td>
    </tr>
    <tr>
      <td>invert </td>
      <td>create a chord inversion using a list of PCHs and inversion number. </td>
    </tr>
  </tbody>
</table>
<p>Note, these PCH functions take into account the number of scale degrees per octave and normalize PCHs for overflows and underflows. For example, when pch-add is used with [8 11], interval 1, and scale-degrees 12, rather than return [8 12], the value will be normalised to [9 0]. The following shows an example usage of PCH-related functions.</p>
<pre><code class="clojure">    user=&gt; (pch-add [8 0] 1)
    [8 1]
    user=&gt; (pch-add [8 0] 13)
    [9 1]
    user=&gt; (pch-add [8 0] -1)
    [7 11]
    user=&gt; (pch-diff [8 0] [8 7])
    7
    user=&gt; (pch-diff [8 0] [9 1])
    13
    user=&gt; (pch-interval-seq [8 0] [2 3 -1])
    ([8 0] [8 2] [8 5] [8 4])
    user=&gt; (analyze-intervals [[8 0] [8 2] [8 5]])
    [2 3]
    user=&gt; (invert [[8 1] [8 2] [8 3]] 1)
    [[8 1] [7 2] [7 3]]
</code></pre>
<p>These functions provide useful functions for transforming PCH values and working with intervals between PCHs. They allow for common musical operations such as transposition and inversions. Retrogrades and sub-list operations can be achieved using Clojure’s reverse, drop, and take functions.</p>
<h4><a href="#tunings" name="tunings"></a>Tunings</h4>
<p>score.tuning provides functions for working with musical tunings. A tuning is defined using a Clojure map data structure with specific key/value pairs. The following shows an example of the twelve-tone equal temperament tuning, provided by Score.</p>
<pre><code class="clojure">    (def ^:const ^{:tag 'double}
      MIDDLE-C 261.6255653005986)

    (def TWELVE-TET
      { :description "Twelve-Tone Equal Temperament"
        :base-freq MIDDLE-C
        :num-scale-degrees 12
        :octave 2.0
        :ratios (map #(Math/pow 2.0 (/ % 12)) (range 12))
       })
</code></pre>
<p>Besides defining tunings by hand, the create-tuning-from-file function can be used to load files in the <a href="http://www.huygens-fokker.org/scala/scl_format.html">Scala file format</a>. This provides access to over 4000 scale files found in Scala’s <a href="http://www.huygens-fokker.org/scala/downloads.html#scales">scale archive</a>.</p>
<p>Once a tuning is created, the pch-&gt;freq function found in score.tuning can be used. This function takes in two arguments: a tuning and a PCH. As noted earlier, PCH is a 2-element list that provides an octave and scale degree. The result is the frequency for a given PCH.</p></div></div></div></body></html>