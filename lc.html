<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>lc! - mini-language for notation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Score</span> <span class="project-version">0.4.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="basics.html"><div class="inner"><span>Basics of Score Writing Using Lists </span></div></a></li><li class="depth-1 "><a href="beats.html"><div class="inner"><span>Beats - functions for beat sequences and sets</span></div></a></li><li class="depth-1 "><a href="csound.html"><div class="inner"><span>Csound Live Coding Example </span></div></a></li><li class="depth-1 "><a href="design.html"><div class="inner"><span>Design</span></div></a></li><li class="depth-1 "><a href="euclid.html"><div class="inner"><span>Euclidean Rhythms</span></div></a></li><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Introduction to Score</span></div></a></li><li class="depth-1  current"><a href="lc.html"><div class="inner"><span>lc! - mini-language for notation</span></div></a></li><li class="depth-1 "><a href="mask.html"><div class="inner"><span>Mask</span></div></a></li><li class="depth-1 "><a href="musical_values.html"><div class="inner"><span>Musical Values</span></div></a></li><li class="depth-1 "><a href="score_gen.html"><div class="inner"><span>Score Generation</span></div></a></li><li class="depth-1 "><a href="score_mapping.html"><div class="inner"><span>Score Mapping </span></div></a></li><li class="depth-1 "><a href="score_organization.html"><div class="inner"><span>Score Organization </span></div></a></li><li class="depth-1 "><a href="sieves.html"><div class="inner"><span>Sieves</span></div></a></li><li class="depth-1 "><a href="transformation.html"><div class="inner"><span>Score Transformation </span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>score</span></div></div></li><li class="depth-2 branch"><a href="score.amp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>amp</span></div></a></li><li class="depth-2 branch"><a href="score.beats.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>beats</span></div></a></li><li class="depth-2 branch"><a href="score.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="score.euclid.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>euclid</span></div></a></li><li class="depth-2 branch"><a href="score.freq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>freq</span></div></a></li><li class="depth-2 branch"><a href="score.lc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lc</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mask</span></div></div></li><li class="depth-3 branch"><a href="score.mask.accumulator.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>accumulator</span></div></a></li><li class="depth-3 branch"><a href="score.mask.bpf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bpf</span></div></a></li><li class="depth-3 branch"><a href="score.mask.generators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>generators</span></div></a></li><li class="depth-3 branch"><a href="score.mask.items.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>items</span></div></a></li><li class="depth-3 branch"><a href="score.mask.mask.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mask</span></div></a></li><li class="depth-3 branch"><a href="score.mask.oscillators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oscillators</span></div></a></li><li class="depth-3 branch"><a href="score.mask.probability.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>probability</span></div></a></li><li class="depth-3"><a href="score.mask.quantizer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>quantizer</span></div></a></li><li class="depth-2 branch"><a href="score.ops.html"><div class="inner"><span class="tree" style="top: -269px;"><span class="top" style="height: 278px;"></span><span class="bottom"></span></span><span>ops</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>orchestra</span></div></div></li><li class="depth-3 branch"><a href="score.orchestra.performer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>performer</span></div></a></li><li class="depth-3"><a href="score.orchestra.performer-group.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>performer-group</span></div></a></li><li class="depth-2 branch"><a href="score.sieves.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>sieves</span></div></a></li><li class="depth-2 branch"><a href="score.tuning.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tuning</span></div></a></li><li class="depth-2"><a href="score.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#lc-mini-language-for-notation" name="lc-mini-language-for-notation"></a>lc! - mini-language for notation</h1>
<p>lc! is a mini-language for generation of note lists. It was originally written for use in the context of live coding (hence “lc”), but it is generally useful for note writing. </p>
<p>lc! is inspired heavily by <a href="http://www.abcnotation.com">ABCNotation</a> and <a href="http://www.lilypond.org">Lilypond</a>. </p>
<h2><a href="#example" name="example"></a>Example</h2>
<p>The following demonstrates three equivalent ways to notate a sequence of notes that go from middle-C to the C one octave above.</p>
<pre><code class="clojure">(lc! '(c4 d4 e4 f4 g4 a4 b4 c5))
(lc! '(c4 d e f g a b c5))
(lc! '(c4 d e f g a b c+))
</code></pre>
<p>The results of executing any of the statements above is:</p>
<pre><code class="clojure">([0.0 1.0 261.6255653005986] 
 [1.0 1.0 293.6647679174076] 
 [2.0 1.0 329.6275569128699] 
 [3.0 1.0 349.2282314330039] 
 [4.0 1.0 391.99543598174927] 
 [5.0 1.0 440.0] 
 [6.0 1.0 493.8833012561241] 
 [7.0 1.0 523.2511306011972])
</code></pre>
<p>Each generated note vector has a start time, duration, and frequency value. By default, lc! uses a duration of 1.0 for each note, and the start time is advanced by the duration for each note (or rest) generated. lc! also uses str-&gt;freq by default to generate frequency values for each note. Users may supply a string conversion function as an optional second argument. Pre-made functions are provided in the score.freq names. For example, using str-&gt;notenum, the output would be:</p>
<pre><code class="clojure">user=&gt; (lc! '(c4 d e f g a b c5) str-&gt;notenum)
([0.0 1.0 60] 
 [1.0 1.0 62] 
 [2.0 1.0 64] 
 [3.0 1.0 65] 
 [4.0 1.0 67] 
 [5.0 1.0 69] 
 [6.0 1.0 71] 
 [7.0 1.0 72])
</code></pre>
<h2><a href="#usage" name="usage"></a>Usage</h2>
<p>lc! operates on a list of symbols. Symbols may be a <strong>base duration value</strong>, <strong>note symbol</strong>, <strong>note chord</strong>, or <strong>rest</strong>. Each symbol is processed according the contents of the symbol and the running state of the lc! process. </p>
<h3><a href="#duration-values" name="duration-values"></a>Duration Values</h3>
<p>When a number is found, lc! updates the current base duration to the value given. By default, lc! uses a value of 1 as the duration for any note. </p>
<pre><code class="clojure">user=&gt; (lc! '(c d e))
([0.0 1.0 261.6255653005986] 
 [1.0 1.0 293.6647679174076] 
 [2.0 1.0 329.6275569128699])

user=&gt; (lc! '(4 c d e))
([0.0 4.0 261.6255653005986] 
 [4.0 4.0 293.6647679174076] 
 [8.0 4.0 329.6275569128699])
</code></pre>
<p>Notes and rests may modify the duration for the note or rest by appending : or &gt; and a numeric value. The : notation uses the number following as a multiplier. For example: </p>
<pre><code class="clojure">user=&gt; (lc! '(c:4 d eb:2 c:4) str-&gt;notenum)
([0.0 4.0 60] 
 [4.0 1.0 62] 
 [5.0 2.0 63] 
 [7.0 4.0 60])
</code></pre>
<p>The first C4 note is generated with a duration of 4.0. The D note shows that duration modifiers are not carried over and generated using the base duration of 1.0. The rest of the notes show their duration modifiers applied. </p>
<p>The &gt; notation (i.e., <em>carry</em> duration) means to make the duration until a certain beat time. For example:</p>
<pre><code class="clojure">user=&gt; (lc! '(c eb c&gt;4) str-&gt;notenum)
([0.0 1.0 60] 
 [1.0 1.0 63] 
 [2.0 2.0 60])
user=&gt; (lc! '(c d eb c&gt;4) str-&gt;notenum)
([0.0 1.0 60] 
 [1.0 1.0 62] 
 [2.0 1.0 63] 
 [3.0 1.0 60])
</code></pre>
<p>The first example has the C note have a duration of 2.0 and the second example has the duration of 1.0. In both examples, the notation may be read as “play C until 4.0 beat time”. If due to the calculations the duration would be &lt;= 0, the note will not be generated.</p>
<p>Carry durations were added such that in a live coding session, a note or rest might be used to fill out the rest of the note list. Users might then further add notes to the list and the duration of the note would be adjusted so the total duration of the note list would remain stable. </p>
<h3><a href="#note-symbols" name="note-symbols"></a>Note Symbols</h3>
<p>Note symbols contains three parts: a note name, octave, and duration (discussed above). The note name is mandatory, while the other two parts are optional. When octave and duration are not specified, the values will be inherited from the current state (i.e., carried over).</p>
<p>Note names may be C, D, E, F, G, A, or B, and they may have one additional modifier afterwards, either b or s, to denote flat or sharp. The note names may be either lower- or upper-case. Some examples:</p>
<table>
  <thead>
    <tr>
      <th>Note Symbol </th>
      <th>Meaning </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>C </td>
      <td>C at current octave </td>
    </tr>
    <tr>
      <td>Cs </td>
      <td>C# or C-sharp </td>
    </tr>
    <tr>
      <td>Eb </td>
      <td>E-flat </td>
    </tr>
  </tbody>
</table>
<p>Octaves are a single digit, +, or - that follows the note name. When no octave is given, the current octave value is inherited. If a digit is given, the value denotes the exact octave to use. When a + or - is used, it denotes an octave higher or lower than the current octave. Some examples:</p>
<table>
  <thead>
    <tr>
      <th>Note Symbol </th>
      <th>Meaning </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>C4 </td>
      <td>Middle-C </td>
    </tr>
    <tr>
      <td>c4 d </td>
      <td>Middle-C, followed by D in octave 4</td>
    </tr>
    <tr>
      <td>c4 d5 </td>
      <td>Middle-C, followed by D in octave 5</td>
    </tr>
    <tr>
      <td>C4 d+ </td>
      <td>Middle-C, followed by D in octave 5</td>
    </tr>
  </tbody>
</table>
<h3><a href="#note-chords" name="note-chords"></a>Note Chords</h3>
<p>Chords may be specified by using vectors. The first symbol in the vector will describe the base properties of the note chord (base octave, duration) and any remaining symbols will only denote additional pitches. All pitch values for the chord are generated within the pitch field (index 2) of the generated note. For example:</p>
<pre><code class="clojure">user=&gt; (lc! '([c:2 e g] d) str-&gt;notenum)
([0.0 2.0 [60 64 67]] 
 [2.0 1.0 62])
</code></pre>
<p>The first generated note has a duration of 2.0 and has a 3-vector of MIDI note numbers denoting a C-major chord. </p>
<h3><a href="#rests" name="rests"></a>Rests</h3>
<p>Rests are used to advance time. They are denoted using the “r” or “R” symbol and may have an optional duration modifier attached (either multiplier or carry duration). They do generate output (a two-vector with just a start and duration time). For example:</p>
<pre><code class="clojure">user=&gt; (lc! '(c r:2 eb c) str-&gt;notenum)
([0.0 1.0 60] 
 [1.0 2.0] 
 [3.0 1.0 63] 
 [4.0 1.0 60])
</code></pre>
<p>The rest value is generated above as [1.0 2.0]. User code that processes lc!-generated note lists to map to target systems will require detection and handling of rest values.</p></div></div></div></body></html>